(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,a){e.exports=a(310)},177:function(e,t,a){},179:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),l=a.n(c),i=(a(177),a(18)),o=a.n(i),u=a(30),s=a(21),m=a(24),p=a(22),f=a(25),h=(a(179),a(322)),d=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).render=function(){var e=a.props.type;return r.a.createElement(h.a.Group,{className:"flight-type"},r.a.createElement(h.a,{positive:"departure"===e,onClick:function(){a.props.onTypeChange("departure")}},"\u0412\u044b\u043b\u0435\u0442"),r.a.createElement(h.a.Or,{text:"|"}),r.a.createElement(h.a,{positive:"arrival"===e,onClick:function(){a.props.onTypeChange("arrival")}},"\u041f\u0440\u0438\u043b\u0435\u0442"))},a}return Object(f.a)(t,e),t}(r.a.Component),g=a(79),E=a(325),b=a(326),v=a(327),w=a(319),y=a(320),O=a(36),j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).isDelayed=function(){var e=a.props.flight;return!!(e.delayTime&&e.delayTime>e.time)},a.renderAircraft=function(){var e=a.props.flight;if(!e)return"";var t={style:{marginLeft:0}};return e.aircraft.toLowerCase().includes("Sukhoi".toLowerCase())&&(t.color="red"),r.a.createElement(g.a,Object.assign({basic:!0},t),e.aircraft)},a.renderTime=function(){var e=a.props.flight;return a.isDelayed()?r.a.createElement("p",null,r.a.createElement("del",null,e.timeText),r.a.createElement("br",null),r.a.createElement("span",{className:"red"},e.delayTime.slice(11,16))):e.timeText},a.render=function(){var e=a.props.flight;if(e){var t={};return a.isDelayed()&&(t.attached="top"),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,t,r.a.createElement(b.a,null,r.a.createElement(b.a.Row,null,r.a.createElement(b.a.Column,{width:8},r.a.createElement(v.a,{as:"h2"},r.a.createElement(v.a.Content,null,e.city),r.a.createElement(v.a.Subheader,null,a.renderTime())),a.renderAircraft()),r.a.createElement(b.a.Column,{width:2},r.a.createElement(w.a,null,e.numbers.map(function(e){return r.a.createElement(w.a.Item,{key:e},e)}))),r.a.createElement(b.a.Column,{width:2},"".concat(e.term," ").concat(e.gate)),r.a.createElement(b.a.Column,{width:4},r.a.createElement(v.a,{as:"h4"},e.status))))),a.isDelayed()&&r.a.createElement(y.a,{warning:!0,attached:"bottom"},r.a.createElement(O.a,{name:"warning"}),"\u0420\u0435\u0439\u0441 \u0437\u0430\u0434\u0435\u0440\u0436\u0430\u043d!"))}},a}return Object(f.a)(t,e),t}(r.a.Component),C=a(321),x=function(){return r.a.createElement(C.a,null,r.a.createElement(C.a.Paragraph,null,r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null)),r.a.createElement(C.a.Paragraph,null,r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null)),r.a.createElement(C.a.Paragraph,null,r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null),r.a.createElement(C.a.Line,null)))},S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).render=function(){var e=a.props,t=e.flights;return e.loading?r.a.createElement(x,null):t&&t.length?t.map(function(e){return r.a.createElement(j,{key:e.id,flight:e})}):"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"},a}return Object(f.a)(t,e),t}(r.a.Component),k=a(318),T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={searchTerm:""},a.onFormSubmit=function(){a.props.onSubmit(a.state.searchTerm)},a.onInputChange=function(e,t){var n=t.value;a.setState({searchTerm:n})},a.clearInput=Object(u.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({searchTerm:""});case 2:a.onFormSubmit();case 3:case"end":return e.stop()}},e)})),a.render=function(){var e=a.state.searchTerm;return r.a.createElement(k.a,{onSubmit:a.onFormSubmit},r.a.createElement(k.a.Input,{onChange:a.onInputChange,onBlur:a.onFormSubmit,value:e,fluid:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443 \u0440\u0435\u0439\u0441\u0430, \u0433\u043e\u0440\u043e\u0434\u0443 \u0438\u043b\u0438 \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",icon:e?{name:"times",link:!0,onClick:a.clearInput}:null}))},a}return Object(f.a)(t,e),t}(r.a.Component),L=a(317),D=function(){var e=Object(u.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://cors-anywhere.herokuapp.com/"+t);case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),_=function(e,t){var a=new Map,n=[];e.sort(function(e,t){return e.main_flight>t.main_flight?1:e.main_flight<t.main_flight?-1:0}),e.forEach(function(e){if(""===e.main_flight){var n={};n.id=e.i_id,n.numbers=["".concat(e.co.code," ").concat(e.flt)],n.city="departure"===t?e.mar2.description:e.mar1.description,n.status=e.vip_status_rus,n.time=e.t_st,n.timeText=("departure"===t?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435":"\u041f\u0440\u0438\u0431\u044b\u0442\u0438\u0435")+" ".concat(e.t_st.slice(11,16)),n.delayTime=e.t_et,n.departTime=e.t_otpr,n.aircraft=e.aircraft_type_name,n.term=e.term,n.gate=e.gate_id,a.set(e.i_id,n)}else{var r=a.get(e.main_flight);r.numbers.push("".concat(e.co.code," ").concat(e.flt)),a.set(e.main_flight,r)}});var r=!0,c=!1,l=void 0;try{for(var i,o=a.values()[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;n.push(u)}}catch(s){c=!0,l=s}finally{try{r||null==o.return||o.return()}finally{if(c)throw l}}return n.sort(function(e,t){return e.time<t.time?-1:e.time>t.time?1:0}),n},F=a(323),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).render=function(){return r.a.createElement(F.a,{color:"black",attached:!0,className:"navbar",inverted:!0},r.a.createElement(F.a.Item,{header:!0},"\u0428\u0435\u0440\u0435\u043c\u0435\u0442\u044c\u0435\u0432\u043e"))},a}return Object(f.a)(t,e),t}(n.Component),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={type:"departure",searchTerm:"",flights:[],loading:!0,btnLoading:!1,startDate:Date.now()+72e5,endDate:Date.now()+108e5},a.prepareUrl=function(e){var t=a.state.type,n=new Date(a.state.startDate).toISOString().slice(0,14)+"00",r=new Date(a.state.endDate).toISOString().slice(0,14)+"59",c="";e&&(c="search="+encodeURI(e),n=n.slice(0,-5)+"00:00",r=r.slice(0,-5)+"23:59");var l="dateEnd=".concat(r),i="dateStart=".concat(n),o="direction=".concat(t);return"".concat("https://www.svo.aero/bitrix/timetable/","?").concat(o,"&").concat(i,"&").concat(l,"&perPage=9999&page=0&&locale=ru&").concat(c)},a.getFlights=function(){var e=Object(u.a)(o.a.mark(function e(t){var n,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.type,e.next=3,D(t);case 3:if((r=e.sent)&&r.items){e.next=6;break}return e.abrupt("return");case 6:return c=_(r.items,n),e.abrupt("return",c);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadMoreClick=Object(u.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState(function(e){return{btnLoading:!0,startDate:e.startDate+72e5,endDate:e.endDate+72e5}});case 2:return t=a.prepareUrl(),e.next=5,a.getFlights(t);case 5:n=e.sent,a.setState(function(e){return{btnLoading:!1,flights:e.flights.concat(n)}});case 7:case"end":return e.stop()}},e)})),a.onTypeChange=function(){var e=Object(u.a)(o.a.mark(function e(t){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({type:t,startDate:Date.now()+72e5,endDate:Date.now()+108e5,loading:!0,searchTerm:""});case 2:return n=a.prepareUrl(),e.next=5,a.getFlights(n);case 5:r=e.sent,a.setState({flights:r,loading:!1});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSearch=function(){var e=Object(u.a)(o.a.mark(function e(t){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({loading:!0});case 2:return n=a.prepareUrl(t),e.next=5,a.getFlights(n);case 5:return r=e.sent,e.next=8,a.setState({flights:r,loading:!1,searchTerm:t});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=Object(u.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.prepareUrl(),e.next=3,a.getFlights(t);case 3:n=e.sent,a.setState({flights:n,loading:!1});case 5:case"end":return e.stop()}},e)})),a.render=function(){var e=a.state,t=e.type,n=e.flights,c=e.loading,l=e.btnLoading,i=e.searchTerm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),r.a.createElement(L.a,null,r.a.createElement(b.a,null,r.a.createElement(b.a.Row,{className:"mb15"},r.a.createElement(b.a.Column,{computer:4,mobile:16}),r.a.createElement(b.a.Column,{computer:8,mobile:16},r.a.createElement(T,{onSubmit:a.onSearch}))),r.a.createElement(b.a.Row,null,r.a.createElement(b.a.Column,{computer:4,mobile:16,textAlign:"center"},r.a.createElement(d,{type:t,onTypeChange:function(e){return a.onTypeChange(e)}})),r.a.createElement(b.a.Column,{computer:8,mobile:16},r.a.createElement(S,{type:t,flights:n,loading:c}))),r.a.createElement(b.a.Row,null,r.a.createElement(b.a.Column,{computer:4,mobile:16}),r.a.createElement(b.a.Column,{computer:8,mobile:16,textAlign:"center"},!(i||c||!n)&&r.a.createElement(h.a,{content:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435",disabled:c||l,primary:!0,onClick:function(){return a.loadMoreClick()},loading:l}))))))},a}return Object(f.a)(t,e),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[172,1,2]]]);
//# sourceMappingURL=main.c0de7f52.chunk.js.map